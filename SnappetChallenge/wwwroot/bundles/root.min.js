var SnappetChallenge;(function(n){var i=function(){function n(n,t){this.pattern=n;this.form=t}return n}(),t;n.Route=i;t=function(){function n(n,t){this.name=n;this.data=t}return n}();n.TemplateForm=t})(SnappetChallenge||(SnappetChallenge={})),function(n){var i=function(){function i(){var i=this;this.services=new n.Services;this.mainViewModel=new t;this.formManager=new n.FormManager(this.mainViewModel);this.start=function(){var t=Sammy("#site-content");n.catalogRegistry.getCatalogs().forEach(function(n){var r=n.init(i.services);r.routes.forEach(function(n){i.setupRoute(t,n.pattern,n.form,r.catalogName)});i.mainViewModel.registredCatalogs.push(r)});ko.applyBindings(i.mainViewModel);i.mainViewModel.registredCatalogs().length&&t.run(i.mainViewModel.registredCatalogs()[0].defaultRoute);$("#site-content").fadeIn(500)};this.setupRoute=function(n,t,r,u){n.get(t,function(n){i.mainViewModel.form(r);r.data.init(n.params);i.mainViewModel.activeCatalogName(u)})}}return i}(),t;n.RootApp=i;t=function(){function n(){var n=this;this.form=ko.observable();this.registredCatalogs=ko.observableArray([]);this.activeCatalogName=ko.observable();this.activeCatalog=ko.computed(function(){return n.registredCatalogs().filter(function(t){return t.catalogName===n.activeCatalogName()})[0]})}return n}();n.MainViewModel=t}(SnappetChallenge||(SnappetChallenge={}));$(function(){(new SnappetChallenge.RootApp).start()}),function(n){var t=function(){function n(n){this.showMainForm=function(t){n.form(t)}}return n}();n.FormManager=t}(SnappetChallenge||(SnappetChallenge={}));